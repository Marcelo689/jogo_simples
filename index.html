<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo 1</title>
    <style>
        .class-name{
            color: blue;
        }
        .container-player img{
            display: flex ;
            height: 250px;
            width: 250px;
        }

        .mensagem{
            color: brown;
            font-size: large;
        }

    </style>
</head>
<body>
    <h1>Jogo pagina</h1>
    <form >
        <label for="usuario">Digite seu nome</label>
        <input type="text" name="usuario" id="usuario">
        <button type="submit">Salvar</button>
    </form>

    <p class="mensagem"> Esperando outro jogador</p>

    <div id="meuPersonagem" class="container-player"></div>
    <div id="meuOponente" class="container-player"></div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        const formulario = document.getElementsByTagName("form")[0];

        formulario.addEventListener('submit', (e) =>{
            e.preventDefault();
            var nome = usuario.value;
            socket.emit("meu-nome", nome);
        })

        socket.on("loadChar", ( nomePreechido , personagem) => {
            var nome = document.createElement("p");
            nome = personagem.name;
            nome.className = "class-name"

            var imagem = document.createElement("img");
            imagem.src = personagem.img;

            var pAttack = document.createElement("p");
            pAttack.textContent = "attack : " + personagem.attack;

            var pDefense = document.createElement("p");
            pDefense.textContent =  "defense : " + personagem.defense;

            const meuPersonagemDiv = document.getElementById("meuPersonagem");
            meuPersonagemDiv.append(nome);
            meuPersonagemDiv.append(imagem);
            meuPersonagemDiv.append(pAttack);
            meuPersonagemDiv.append(pDefense);

            atualizaNome(document.getElementsByClassName("mensagem")[0], nomePreechido);
        })

        function atualizaNome(elemento, nome){
            elemento.textContent = nome;
            formulario.style.display = "none";
        }

    </script>
</body>
</html>